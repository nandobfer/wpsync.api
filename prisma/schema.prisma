// *** GENERATED BY PRISMIX :: DO NOT EDIT ***
datasource db {
	provider = "mysql"
	url = env("DATABASE_URL")
}
generator client {
	provider = "prisma-client-js"
	previewFeatures = ["fullTextSearch","fullTextIndex"]
}

model User {
    id          String          @id @default(uuid())
    name        String
    email       String          @unique
    password    String          @db.Text
    admin       Boolean         @default(false)

    server      Server?
    websites    Website[]

}

model Server {
    id              String          @id @default(uuid())
    ssh_address     String          @db.Text
    ssh_user        String
    ssh_password    String?         @db.Text
    ssh_key         String?         @db.LongText

    user_id         String          @unique
    user            User            @relation(fields: [user_id], references: [id], onDelete: Cascade)
}

model Website {
    id              String          @id @default(uuid())
    name            String          @db.Text

    settings_local  WebsiteSettings?    @relation(name: "local_settings")
    settings_prod  WebsiteSettings?    @relation(name: "prod_settings")

    user_id         String          @unique
    user            User            @relation(fields: [user_id], references: [id], onDelete: Cascade)

}

model WebsiteSettings {
    id              String          @id @default(uuid())
    url             String          @db.Text
    directory_path  String          @db.Text
    mysql           MysqlSettings? 

    website_id_local    String      @unique
    website_local   Website         @relation(fields: [website_id_local], references: [id], onDelete: Cascade, name: "local_settings")
    website_id_prod    String      @unique
    website_prod   Website         @relation(fields: [website_id_prod], references: [id], onDelete: Cascade, name: "prod_settings")
}

model MysqlSettings {
    id              String          @id @default(uuid())
    host            String          @db.Text
    port            String
    database_name   String
    username        String
    password        String

    website_settings_id  String          @unique
    website_settings   WebsiteSettings         @relation(fields: [website_settings_id], references: [id], onDelete: Cascade)

}